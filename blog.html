<html>
    <h1> The Blog of William Kelley from Wolverinesoft Game Studio!</h1>

    <h2>Devblog 4: 3/10 to  3/23</h2>

    <h3>Total Time: 24 hours</h3>

    <h3>Wolverinesoft meetings: 4 hours</h3>
    <p>There were 2 meetings during this devblog, 3/10 and 3/17.</p>

    <h3>Other meetings: 1 hour</h3>
    <p>There was one other meeting that I had to do this week. It was with Daniel, the previous technical audio lead, about a bug we have been having where audio doesn't work for some people on some machines and does work for some people on others. Ultimately Daniel did discover we have a corrupted Wwise install on our project and re-importing the wwise project fixed those issues. This may or may not have fixed that issue, but it fixed something. I know for a fact that at least one person can't play the game due to Wwise, but they are experiencing a different issue than what I was aware of for now. For now, at least we fixed something. Since, for basically this entire issue, we were flying blind without any error messages or anything with this issue it is difficult to troubleshoot, but we have slowly fixed issues and it might be that only one person is having an issue, though we can't know for sure.</p>

    <h3>Play guitar over castle music and make new castle track: 8 hours</h3>
    <p>For a few weeks now, I have been thinking about ways to make the Hero battle different in each of the hero battles since right now the song is the same, despite the fact that most other things are different. There was some MIDI guitar already in the track, and I play the guitar, so I decided more live guitar would be cool. It is in a first-draft stage for now, but the track in its current state is here: </p>
    <audio controls>
        <source src="castle_battle_temp.wav" type="audio/wav">
    </audio>
    <p>Building this track to be where it is there took a few challenges. First, the person who wrote these tracks wrote them last semester and isn't around this semester, so it was up to me to decide where everything goes. For many of them, it was a simple task since they were about the same length so lining them up was a matter of lining up their transients till they sounded like they were playing together. However, there were a few tracks designated "active" tracks that I wasn't totally sure what to do with. There were only a few, and most of them didn't last the whole length of the track and didn't totally sound finished. My first job was to layer them into the rest of the tracks to make something with everything. With the beat in the "active" tracks this was pretty simple, as I just had to line up the beat with the rest of the transients and splice it a bit to make the breaks line up with the other beats. However, there were 2 MIDI guitar tracks that were more confusing, as they sounded like they were written by someone who doesn't know much about writing for guitar or what would be typical/idiomatic for the instrument. I already knew that I wanted to play live guitar on the track, but learning the parts note by note wasn't going to happen quickly so I made some changes and extensions that I liked. Then, I played some more licks/strumming/a short solo at the beginning to make something that I think is a good first draft.</p>

    <p>Though I like the sound of the guitar, there are a few things I need to work out. First, I need to decide which of the 3 hero battles this track will happen in. My current frontrunner is the 2nd one in the village revisit since it seems like a good balance of some guitar without it completely dominating the track, which I think might be cool in the castle battle but I need to figure that out. Then, it's a matter of layering the things I already have from the previous semester and anything new I want to make/record to make 3 similar but distinct tracks to make each hero battle a little different. Since I did some work and overall am happy with it this has given me more inspiration to do more work on it.</p>

    <h3>Making audio save: 5 hours</h3>
    <p>This task was probably the biggest programming task I have had yet as it caused me to write a real script that did something real. Luckily, it wasn't that bad. This task's goal was to fix a bug where, if the game is saved/loaded when the music is something other than the default music for that scene, the music isn't saved and the default music is played instead since there wasn't any state in the game for what piece of music is being played. After looking around for where I should put this script, I promptly gave up and asked the programming lead, Allie, who told me where the script should go and I worked on putting it there. Writing the script wasn't that bad, save for the fact that it took a bit of time. </p>

    <p>Even though the code wasn't that hard to write, it still doesn't work. This is due to Awake() and Start(). So, in order for the scene to be loaded correctly, the music states saved when the player saved need to be loaded after the scripts that set up the scene for first time loading. If the scripts that load the scene for the first time happen in Start(), load() seems to happen before them and the scene is loaded as if there are no player preferences since load() happens during Start(). However, if the scripts to load the scene the first time are done in Awake(), this is also an issue since one of them is a singleton which plays the music switch container. The singleton check happens during Awake(), so if that script happens before the singleton check then the script will run before the singleton check happens which causes overlapping issues. I, to some degree, understand that I can set DefaultExecutionError somewhere I think? Though I think it might be better to simply think about a different way to design how the music loads in new scenes/for the first time. Without saving music, our previous solution worked perfectly so I would like to keep it if possible to avoid writing a whole new system. Ultimately I understand I will probably have to though. Even though the code was tested and works fine, Awake() and Start() are stopping saving the music from working completely right now.</p>


    <h3>Making Audio Settings Work: 3 hours</h3>
    <p>This was a little less programming since I ended up using an existing script, but it still involved a little bit of Unity work. This was my first use of a Wwise RTPC, or Real-Time Parameter Control, to control the volume of a bus within Wwise from Unity directly. It did take a little bit to figure out how all that worked but once I understood that I was able to pretty easily make this work. And I got to learn about PlayerPrefd in Unity which is a cool thing I did not know about.</p>

    <h3>Polishing UI sounds: 3 hours</h3>
    <p>This is here because I spent a little bit of time doing a bunch of small things in Unity to make our UI sound better. I didn't end up making any new sounds, but the biggest change I made is to how sounds overlap. One of the things I didn't like about our UI is how, no matter how quickly the mouse would hover across the settings menu or whatever UI object, the hover sound would play and they would all overlap and sound bad. So I made it so that UI sound cannot overlap with itself and if one of those sounds is playing then another of that sound cannot play. Since that sound exists to be clear to the player, I figured if they were dragging their mouse quickly over a bunch of UI elements they would rather not be jumpscared by a bunch of sounds at once and don't need the sound for clarity as they probably know they are dragging their mouse across a bunch of UI elements. I also did this with dialogue, but made it so that if a new sound starts, Wwise kills the old one so they won't overlap but the newest sound will always take precedent which is preferable so they player can understand the new emotion the NPC is feeling or something like that.</p>







    
    <h2>Devblog 3: 3/3 to 3/10</h2>
    
    <h3>Total Time: 12 hours</h3>

    <h3>Introduction</h3>
    <p>this was a shorter cycle than the others, but I was still able to refine a few things in the project and learn a few more things about Wwise.</p>

    <h3>Wolverinesoft meetings: 2 hours</h3>
    <p>This was the online Wolverinesoft meeting on 3/3.</p>

    <h3>Other meetings: 1 hour</h3>
    <p>Other than the official Wolverinesoft meetings, I had a few calls with the Audio Lead, Lea, about audio features and bugs in the game. This let me do my later work with loops and transitions since I had a few questions about who wrote each part and where some things are in the codebase/Google Drive/game.</p>

    <h3>Fixing music loops in Wwise: 4 hours</h3>
    <p>My first major task this week was to fix the fact that, in Wwise, many of the music pieces don't loop correctly. Either they had fade-ins or fade-outs in them, the ending was after one loop, or some other thing seemed like it was in the wrong place.</p> 
    <p>The first major hurdle for this task was to get the tempo for everyone's tracks so the loops could be an integer number of beats, making everything easier. Since everyone wrote a little bit of music, I had to ask everyone what their tempo was. Also, some people aren't around anymore so I had to figure those values out, making the tempo finding process last longer.</p>
    <p>Once I had tempos, things went pretty smoothly, but there still were a few pieces of confusion which were due to file naming or certain files not being in Wwise/Google Drive in the places I thought they were. Since I wasn't clear totally on where the things were that had to be put in the game, I asked Lea and she let me know. Also, some of the things in Wwise weren't exactly one loop of music so I had to guess where the loop was. I was able to get this done in the end though.</p>

    <h3>Refining transitions between pieces: 5 hours</h3>
    <p>My other task this week was to think more about the transitions between pieces of encounter/overworld music in the game. All the music is already in, and the music is transitioning between each other, but I had a few issues with the transitions:</p>
    <ul>
        <li>The audio transitions didn't line up with the visual transitions/fading in and out</li>
        <li>All the transitions were the same crossfade, which was weird and didn't sound right</li>
        <li>There wasn't very much intention as to how the transitions worked, just that the transitions worked at all</li>
    </ul>
    <p>So, I set out to make the music transitions better. My first initiative was to make the audio transitions match up with the visual transitions. This wasn't that hard, save for the fact that I had to learn how scene transitions worked and how their values were set. Luckily I found SceneTransitionManager and did fine. However, transitions in are set in code and not in the editor, so my music transitions were wrong until I found that. Now I am hoping the values for visual transitions don't change anymore so I don't have to rewrite the Wwise transitions.</p>
    <p>The more difficult part of this task was figuring out how to add silence to the beginning of a clip in Wwise. Within Wwise, transitions happen directly between two pieces of music and there is never any silence in between. Even if you offset the piece of music you are transitioning into, it will start before the offset and you won't hear the beginning of the music you worked so hard on. My goal was to hear the beginning of things even if the music is being faded in, and for there to be silence in some transitions, especially if the screen is black for a little bit.</p>
    <p>To solve this, I made a silent, minute long track and dragged the exit cue such that the piece exited after one second. Then, I added it to the music playlist and enabled it whenever I needed 1 second of silence, which is most places. This was the most elegant solution I found for placing silence between 2 pieces of music, though it involved copying and pasting my 1-second silent composition several times. This will let us have a high degree of customization as to how long the silence is, and ideally shouldn't be too tedious to change in the future. Once I learned how to do this I was able to set up all the transitions the way I wanted with 1 second of silence in between most of them.</p>
    <p>Overall I like these transitions a lot more, but there is still more refining to do with the amount of silence and fade ins and stuff. I think this is a much better solution than the universal crossfade it was before.</p>



    
    <h2>Devblog 2: 2/12 to 2/25</h2>

    <h3>Total Time: 24 hours</h3>

    <h3>Introduction</h3>
    <p>These 2 weeks in Wolverinesoft I was able to get actual work done, which was good. Since I was able to spend time learning Wwise in the last 2 weeks, I was able to use that knowledge to help build a few features this week that I like that i built.</p>

    <h3>Wolverinesoft meetings: 2 hours</h3>
    <p>There were 2 meetings in between the last devblog and this one. However, I wasn't able to go to one of them since I was out of town, so I only count for 2 hours for this blog.</p>

    <h3>Meetings outside of Wolverinesoft: 2 hours</h3>
    <p>Outside of the normal Wolverinesoft meetings, there were a few meetings I had/got to go to. The first meeting was with a sound designer in the games industry that helped us debug some implementation and Wwise issues, as well as taught us some useful things about game development. I believe we will continue to work with this Crystal throughout the semester. This meeting took an hour.</p>
    <p>Also, since I wasn't at one of the regular meetings for Wolverinesoft I had to go over tasks with the audio lead, Lea. In total meeting about those tasks took an hour.</p>

    <h3>Wwise music overlap bugfix: 7 hours</h3>
    <p>One of the main tasks I had to complete during this two-week period was fix a bug in Unity where all the music was playing at the right time but the other music wasn't stopping, resulting in music overlapping with itself or music from another scene. Though the implementation of the solution didn't take that much code to ultimately do, what made this feature difficult is learning the Unity codebase well enough to know how/where to write the code. In the last devblog I wrote about knowing how to set states from Unity in order to trigger Wwise transitions, but it took some time to figure out how to do that within the Project Quest codebase.</p>
    <p>The other thing that took a while with this task is supporting both use cases for music: loading directly into a scene and going into that scene from another scene. These conflict with each other because loading into a scene directly involves pressing "play" on the music switch container that lives throughout the lifetime of the game, but if in every scene we press play on the same container then all the music would be playing at the same time by the end of the game. To move between scenes, just some states have to be set to correctly transition music and ambience tracks, but if you load directly into a scene no music is playing if you just set the states required to play the correct music in the switch container. This was ultimately solved by having both things in the project: One global audio object that is created when the first scene is loaded and destroys itself if another one is present when the scene loads, and a local audio object that simply sets the Wwise states required for a transition. The global audio object is loaded only one time and takes care of loading directly into a scene and the local audio object is in every scene and handles transitions. They both set the same states that enable the music to play, but that doesn't matter if a Wwise state is set to the same thing twice.</p>
    <p>Overall, this feature was fun to implement because it was my first enhancement to the codebase. That is also why it took this long.</p>

    <h3>Implement Potion Sound Effect: 4 hours</h3>
    <p>Since the battle system in the game was overhauled this week to substitute the healing minigame for 3 health potions per fight, I had to implement the sound effect for the health potions. Since I still don't know the codebase that well, I was unsure where to put the sound effect as there seemed to be a few places to put it. The person on the programming team advised me to put it on the potion directly, and that seemed like the best option to me in the end so I put the sound effect directly in the function that receives the click for the potions. For this, I should have asked the programming team earlier, rather than just wondering what to do on my own. I probably would have gotten the feature done quicker if I had done that, and I would have been less confused about where to put things. This codebase does use a lot of inheritance, which was the thing that made me the most confused. I did learn a lot about how health and battles are controlled in the game though.</p>

    <h3>Implement Various Battle Music: 9 hours</h3>
    <p>There was a lot of battle music that I did not realize was in the game. This is the list of things I added:</p>
    <ul>
        <li>Every Hero Encounter was changed to the current castle battle music (3 encounters)</li>
        <li>The kid hide-and-seek music was added to the hide and seek minigame, as well as the kid fight</li>
        <li>The mob fight music in the village revisit was added to the ant fight</li>
        <li>The fungus music was added to the fungus dance battle</li>
        <li>In the revisit to the village, I put in the music to play during the mob confrontation</li>
    </ul>
    <p>Though that was all the music that was added, there were a few challenges and pieces of code that had to be added along the way.</p>
    <p>First, I had to add a way to start and end hide-and-seek music at the beginning and end of the kid hide-and-seek minigame. Luckily, I discovered a pub-sub system in which I could run code at the beginning of a quest and at the end, which made it simple to set a specific audio state at QuestStart() and QuestEnd(). Overall this didn't take that long.</p>
    <p>Next, I had to solve the challenge of one music track being in multiple places. The hero track in particular has to be in 3 separate scenes since there are 3 hero fights in 3 separate scenes. This would be easy, save for the fact that different state groups represented the 3 different scenes so it wasn't a matter of setting a simple state. Though I don't like it, what I ended up doing is just duplicating the audio in each scene. I could forsee a future in which I have to change all instances of the audio and I forget one of them, causing a bug, but they are all pretty close together so I will try not to worry about that too much. I also imagine we might want to change the tracks in some way in each separate scene, so ultimately I decided to make them different tracks to perhaps make things simpler later. I am hoping that duplication will not make me sad later.</p>
    <p>The most involved thing to change in the codebase, though, had to do with the fact that I had to make it so more than one piece of battle music could be associated with each scene. Before I implemented this feature, there was just one variable that set the battle music in the whole scene in the Battle Controller gameObject. However, in basically every scene different music had to play in different encounters. This required me to find a way to attach a specific piece of battle music to a specific encounter. Luckily, the hero had 3 different prefabs for the 3 different encounters, so I had to solve 1 fewer issue, but ultimately I was able to attach this information to the enemy directly in the Enemy Profile, which is attached to each enemy gameObject. Then, Battle Controller simply gets access to the enemy profile and sets the state specified there, falling back to a default if necessary. This feature was pretty involved since I had to add the code to battle controller then set all the variables for all the battle controllers in each scene, as well as set the battle music for each enemy. However, I think this will be the easiest way to deal with any new complexity going forward and am happy with how I implemented the feature.</p>

    <p>Other than those issues above, I had to know my way around a few more parts of the codebase to effectively implement those features, which took some time since I am new to this big codebase. Also, for the fungi dance party I had information I thought I didn't have and waited for a response when I could have simply scrolled up in Discord, whoops. In the future I can scroll up in Discord a little quicker and I will have fewer headaches when implementing features. However, this is the biggest impact I have had so far on this project and I am happy with how it turned out since it works and I feel it will be relatively easy to debug issues in the future.</p>




    <h2> Devblog 1: 1/28 to 2/11</h2>
    <h3>Total Time: 24 hours</h3>

    <h3>Introduction</h3>
    <p>These first two weeks in Wolverinesoft were an interesting Introduction to what game development is like beyond normal class projects for me. Having completed EECS 494, I was familiar with Unity and C#, which were helpful in onboarding to the studio, but there were a lot of things and tools that I learned about for the first time within Wolverinesoft. So, these first two weeks I wasn't able to contribute to the project as much as I would like to since I had to learn some tools, like Wwise, that I had never used before that were confusing and deep. However, I am excited to put these tools to use in creating a game that is better than anything else I have made before.</p>

    <h3>Wolverinesoft Meetings: 5 hours</h3>
    <p>Two Wolverinesoft meetings wer during this time: 1/28 and 2/4. The reason I account for 5 hours here is because in the 2/4 meeting the Audio team stayed an extra hour, until 2 PM, to meet with Jerry Berlongieri, a professional games sound designer. Since the audio team was having so much fun talking to Jerry we decided to stay an extra hour to talk to him. Talking to him was a really cool look into what being a real sound designer is like and he was able to give us feedback on our game sounds.</p>

    <h3>Learning Wwise: 10 hours</h3>
    <p>A big chunk of my time in the first few weeks of me being in the studio is learning Wwise, the audio middleware the audio team uses to interface with Unity. I completed the courses Wwise 101 and 201 from Audiokinetic, which were courses on sound effects and interactive music within Wwise respectively. These courses were extremely helpful in learning Wwise since the interface was very confusing at first. Though it is still sometimes confusing, I am now able to work my way through a small part of Wwise in my Wolverinesoft projects. Though these trainings were very comprehensive and taught me a lot, due to their dense nature I probably didn't absorb as much as I wish I had and will probably be coming back to them in the future when I forget something. These courses were overall extremely helpful with Wwise and gave me a sound foundation on how to use Wwise in the future. I would provide a screenshot for this, but I don't get a certification of completion without spending $250 or so on an exam, and there is no other way to track completion, so I'm sorry.</p>

    <h3>Playtesting Project Quest: 3 hours</h3>
    <p>One of my Jira tasks for this sprint is to playtest Project Quest and report all missing audio and audio bugs. I had to play through the game a few times to catch all the ones I could find and reported them in the Discord channel for reporting bugs. I estimate this took me about 2 hours in total to document all the bugs I found.</p>
    <p>Also, I played through the game for about an hour on my own time to familiarize myself with it and understand the story.</p>

    <h3>Researching Wwise Music Bug: 5 hours</h3>
    <p>As well as playtesting the game, my other major Jira talk for this sprint is to help solve an issue in Project Quest where different music and ambiances are played over each other and at the same time instead of transitioning between each other cleanly. Though this task seems simple, I wanted to find the "correct" way to do it in Wwise so I spent a lot of time researching methods to solve this problem. Ultimately I think I understand what to do but haven't had time to do it yet since I wanted to talk it over with the other technical Audio Engineer. My biggest mistake here is thinking about the problem before taking Wwise 201, since that is the Wwise course about interactive music that would have taught me how to solve this issue. I was too worried about this issue and wanted to solve it without having the foundational knowledge in Wwise to really understand how to solve it, and taking the Audiokinetic course helped me way more than any Googling could since I lacked the fundamental knowledge to understand my problem. In the future, when learning a new technology like Wwise I plan to get foundational knowledge before I try to solve problems with the new technology. Overall this bug caused me the most trouble since I didn't understand how Wwise worked well enough to solve it.</p>
    <p>Overall, the solution involves setting a Wwise state when moving between scenes to trigger Wwise transitions instead of just playing events that play or stop specific audio files. To me, this seems like the best option that Wwise gives us to do this and it provides for quick and easy setup of transitions between any audio or ambient tracks. Since this is the last week of the sprint I am going to work with the other Technical Audio engineer to get this feature in the game before next Sunday, and overall I am happy I took the time to understand the problem and the best way to solve it rather than making a worse solution overall with less Wwise knowledge.</p>

    <h3>Conclusion</h3>
    <p>Overall this was a good introduction into Wolverinesoft and how a larger game studio works. Since I spent a lot of time learning how Wwise works I am hopeful I will be able to use that knowledge soon to finish my current Jira tasks as well as more tasks I will get in future weeks/sprints.</p>




        
</html>
